(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11a4ebc2"],{1329:function(e,t,i){"use strict";i("1acd")},"1acd":function(e,t,i){},"96c8":function(e,t,i){"use strict";i.r(t);var n=i("7a23");const c=Object(n["i"])("編輯寵物資料"),l={ref:"imgEditor"},a={style:{display:"flex","justify-content":"center"}},o=Object(n["i"])("　　寵物圖片　　"),j=Object(n["i"])("　　寵物名稱　　"),b=Object(n["i"])("　　曆別　　"),s=Object(n["i"])("國曆"),u=Object(n["i"])("農曆"),d=Object(n["i"])("　　寵物生日　　"),O=Object(n["i"])("儲存");function r(e,t,i,r,m,h){const f=Object(n["B"])("ion-back-button"),p=Object(n["B"])("ion-buttons"),I=Object(n["B"])("ion-title"),g=Object(n["B"])("ion-toolbar"),_=Object(n["B"])("ion-header"),y=Object(n["B"])("ion-img"),H=Object(n["B"])("ion-col"),B=Object(n["B"])("ion-row"),w=Object(n["B"])("ion-label"),v=Object(n["B"])("ion-input"),F=Object(n["B"])("ion-item"),C=Object(n["B"])("ion-select-option"),R=Object(n["B"])("ion-select"),U=Object(n["B"])("ion-datetime"),V=Object(n["B"])("ion-button"),k=Object(n["B"])("ion-grid"),z=Object(n["B"])("ion-content"),D=Object(n["B"])("menu-bar"),S=Object(n["B"])("ion-footer"),T=Object(n["B"])("ion-page");return Object(n["u"])(),Object(n["e"])(T,null,{default:Object(n["H"])(()=>[Object(n["j"])(_,null,{default:Object(n["H"])(()=>[Object(n["j"])(g,null,{default:Object(n["H"])(()=>[Object(n["j"])(p,{slot:"start"},{default:Object(n["H"])(()=>[Object(n["j"])(f,{"default-href":"/family-list"})]),_:1}),Object(n["j"])(I,null,{default:Object(n["H"])(()=>[c]),_:1})]),_:1})]),_:1}),Object(n["j"])(z,{class:"family-list"},{default:Object(n["H"])(()=>[Object(n["j"])(k,null,{default:Object(n["H"])(()=>[Object(n["j"])(B,{style:{"justify-content":"center"}},{default:Object(n["H"])(()=>[Object(n["j"])(H,{size:"12"},{default:Object(n["H"])(()=>[Object(n["I"])(Object(n["h"])("div",l,null,512),[[n["F"],!m.isRemote]]),Object(n["h"])("div",a,[Object(n["I"])(Object(n["j"])(y,{style:{width:"150px",height:"150px"},src:m.imgUrl,alt:"未上傳寵物圖片"},null,8,["src"]),[[n["F"],m.isRemote]])])]),_:1})]),_:1}),Object(n["j"])(B,null,{default:Object(n["H"])(()=>[Object(n["j"])(H,{size:"12"},{default:Object(n["H"])(()=>[Object(n["j"])(F,{class:"input"},{default:Object(n["H"])(()=>[Object(n["j"])(w,null,{default:Object(n["H"])(()=>[o]),_:1}),Object(n["j"])(v,{accept:"image/*",onChange:h.imgFileChange,type:"file"},null,8,["onChange"])]),_:1})]),_:1}),Object(n["j"])(H,{size:"12"},{default:Object(n["H"])(()=>[Object(n["j"])(F,{class:"input"},{default:Object(n["H"])(()=>[Object(n["j"])(w,null,{default:Object(n["H"])(()=>[j]),_:1}),Object(n["j"])(v,{modelValue:m.name,"onUpdate:modelValue":t[0]||(t[0]=e=>m.name=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1}),Object(n["j"])(H,{size:"12"},{default:Object(n["H"])(()=>[Object(n["j"])(F,{class:"input select"},{default:Object(n["H"])(()=>[Object(n["j"])(w,null,{default:Object(n["H"])(()=>[b]),_:1}),Object(n["j"])(R,{interface:"popover",modelValue:m.calendar_type,"onUpdate:modelValue":t[1]||(t[1]=e=>m.calendar_type=e)},{default:Object(n["H"])(()=>[Object(n["j"])(C,{value:"1"},{default:Object(n["H"])(()=>[s]),_:1}),Object(n["j"])(C,{value:"2"},{default:Object(n["H"])(()=>[u]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),Object(n["j"])(H,{size:"12"},{default:Object(n["H"])(()=>[Object(n["j"])(F,{class:"input select"},{default:Object(n["H"])(()=>[Object(n["j"])(w,null,{default:Object(n["H"])(()=>[d]),_:1}),Object(n["j"])(U,{displayFormat:"YYYY-MM-DD",modelValue:m.birthday,"onUpdate:modelValue":t[2]||(t[2]=e=>m.birthday=e)},null,8,["modelValue"])]),_:1})]),_:1}),Object(n["j"])(H,{size:"12"},{default:Object(n["H"])(()=>[Object(n["j"])(V,{class:"button-3",onClick:h.save},{default:Object(n["H"])(()=>[O]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),Object(n["j"])(S,null,{default:Object(n["H"])(()=>[Object(n["j"])(D)]),_:1})]),_:1})}var m=i("d722"),h=i("2ff6"),f=i.n(h),p=i("d867"),I=i("e193"),g={components:{IonBackButton:p["IonBackButton"],IonButton:p["IonButton"],IonButtons:p["IonButtons"],IonCol:p["IonCol"],IonContent:p["IonContent"],IonDatetime:p["IonDatetime"],IonFooter:p["IonFooter"],IonGrid:p["IonGrid"],IonHeader:p["IonHeader"],IonInput:p["IonInput"],IonItem:p["IonItem"],IonLabel:p["IonLabel"],IonPage:p["IonPage"],IonRow:p["IonRow"],IonSelect:p["IonSelect"],IonSelectOption:p["IonSelectOption"],IonTitle:p["IonTitle"],IonToolbar:p["IonToolbar"],MenuBar:I["a"]},data(){return{id:this.$route.params.id,name:"",calendar_type:"",birthday:"",image:"",imgUrl:"",croppieIns:null,isRemote:!0}},methods:{query(){Object(m["queryFamily"])(this.id,e=>{let t=e.family;this.name=t.name,this.calendar_type=""+t.calendar_type,this.birthday=t.birthday,this.image=t.image})},async save(){let e=null;e=null!==this.croppieIns?this.isRemote?this.image:await this.croppieIns.result("base64"):this.image,Object(m["saveFamily"])({id:this.id,name:this.name,calendar_type:this.calendar_type,birthday:this.birthday.split("T")[0],image:e},()=>{this.$router.go(-1)})},imgFileChange(e){const t=e.target.files[0],i=new FileReader;i.readAsDataURL(t),i.onload=()=>{this.image=i.result}}},mounted(){this.query()},watch:{$route(e){"Family"===e.name&&(this.id=e.params.id,this.query())},image(){this.imgUrl=Object(m["getImgSrc"])(this.image),this.isRemote=-1===this.imgUrl.indexOf("base64")},imgUrl(){if(this.isRemote)return;if(!this.$refs.imgEditor)return;null!==this.croppieIns&&(this.croppieIns.destroy(),this.croppieIns=null);const e=new f.a(this.$refs.imgEditor,{viewport:{width:150,height:150,type:"circle"},boundary:{width:300,height:300}});e.bind({url:this.imgUrl}),this.croppieIns=e}}},_=(i("1329"),i("6b0d")),y=i.n(_);const H=y()(g,[["render",r],["__scopeId","data-v-c12dcf18"]]);t["default"]=H}}]);
//# sourceMappingURL=chunk-11a4ebc2.008d65a8.js.map