(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-264ec364"],{"00f5":function(t,e,n){"use strict";n("39ba")},"0eeb":function(t,e,n){"use strict";n("494b")},"39ba":function(t,e,n){},"448a":function(t,e,n){"use strict";var o=n("7a23");function c(t,e,n,c,i,l){const a=Object(o["B"])("ion-img");return Object(o["u"])(),Object(o["e"])(a,{src:l.url},null,8,["src"])}var i=n("d722"),l=n("d867"),a={components:{IonImg:l["IonImg"]},computed:{url(){return`${i["baseUrl"]}/files/${this.path}`}},data(){return{}},props:{path:String}},s=n("6b0d"),j=n.n(s);const b=j()(a,[["render",c]]);e["a"]=b},"494b":function(t,e,n){},"514d":function(t,e,n){"use strict";n.r(e);var o=n("7a23");const c=Object(o["i"])("新增燈種"),i=Object(o["i"])("　　寵物名稱　　"),l=Object(o["i"])("　　寵物生日　　"),a=Object(o["i"])("　　照片　　"),s=Object(o["i"])("　　地址　　"),j=Object(o["i"])("　　金額　　"),b=Object(o["i"])("儲存點燈");function u(t,e,n,u,r,d){const O=Object(o["B"])("ion-back-button"),m=Object(o["B"])("ion-buttons"),h=Object(o["B"])("ion-title"),p=Object(o["B"])("ion-toolbar"),f=Object(o["B"])("ion-header"),I=Object(o["B"])("remote-img"),g=Object(o["B"])("ion-text"),_=Object(o["B"])("ion-img"),H=Object(o["B"])("ion-col"),B=Object(o["B"])("ion-row"),k=(Object(o["B"])("ion-checkbox"),Object(o["B"])("ion-label")),y=Object(o["B"])("ion-item"),C=Object(o["B"])("ion-select-option"),w=Object(o["B"])("ion-select"),v=Object(o["B"])("ion-input"),T=Object(o["B"])("ion-datetime"),V=Object(o["B"])("ion-button"),$=Object(o["B"])("ion-grid"),x=Object(o["B"])("ion-content"),z=Object(o["B"])("menu-bar"),S=Object(o["B"])("ion-footer"),U=Object(o["B"])("ion-page");return Object(o["u"])(),Object(o["e"])(U,null,{default:Object(o["H"])(()=>[Object(o["j"])(f,null,{default:Object(o["H"])(()=>[Object(o["j"])(p,null,{default:Object(o["H"])(()=>[Object(o["j"])(m,{slot:"start"},{default:Object(o["H"])(()=>[Object(o["j"])(O,{"default-href":"/new-order/"+r.id},null,8,["default-href"])]),_:1}),Object(o["j"])(h,null,{default:Object(o["H"])(()=>[c]),_:1})]),_:1})]),_:1}),Object(o["j"])(x,{class:"order-item"},{default:Object(o["H"])(()=>[Object(o["j"])($,null,{default:Object(o["H"])(()=>[Object(o["I"])(Object(o["j"])(B,{class:"ion-margin-bottom ion-justify-content-around"},{default:Object(o["H"])(()=>[(Object(o["u"])(!0),Object(o["g"])(o["a"],null,Object(o["A"])(r.lights,t=>(Object(o["u"])(),Object(o["e"])(H,{class:"ion-text-center",key:t.id,size:"4"},{default:Object(o["H"])(()=>[Object(o["j"])(I,{onClick:e=>d.pick(t),path:t.picked?t.icon:t.icon2},null,8,["onClick","path"]),Object(o["j"])(g,null,{default:Object(o["H"])(()=>[Object(o["i"])(Object(o["D"])(t.title),1)]),_:2},1024),Object(o["j"])(_,{onClick:e=>d.intro(t),src:"/assets/images/icon4.png",style:{margin:"0 auto",width:"60px"}},null,8,["onClick"])]),_:2},1024))),128))]),_:1},512),[[o["F"],r.lights.length]]),Object(o["j"])(B,null,{default:Object(o["H"])(()=>[Object(o["f"])("",!0),Object(o["I"])(Object(o["j"])(H,{size:"12"},{default:Object(o["H"])(()=>[Object(o["j"])(y,{class:"input select"},{default:Object(o["H"])(()=>[Object(o["j"])(w,{disabled:r.checked,interface:"popover",placeholder:"寵物名冊",slot:"end",modelValue:r.family,"onUpdate:modelValue":e[1]||(e[1]=t=>r.family=t)},{default:Object(o["H"])(()=>[(Object(o["u"])(!0),Object(o["g"])(o["a"],null,Object(o["A"])(r.list,t=>(Object(o["u"])(),Object(o["e"])(C,{key:t.id,value:t.id},{default:Object(o["H"])(()=>[Object(o["i"])(Object(o["D"])(t.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["disabled","modelValue"])]),_:1})]),_:1},512),[[o["F"],r.list.length]])]),_:1}),Object(o["j"])(B,null,{default:Object(o["H"])(()=>[Object(o["j"])(H,{size:"12"},{default:Object(o["H"])(()=>[Object(o["j"])(y,{class:"input"},{default:Object(o["H"])(()=>[Object(o["j"])(k,null,{default:Object(o["H"])(()=>[i]),_:1}),Object(o["j"])(v,{readonly:r.checked,modelValue:r.name,"onUpdate:modelValue":e[2]||(e[2]=t=>r.name=t),modelModifiers:{trim:!0}},null,8,["readonly","modelValue"])]),_:1})]),_:1}),Object(o["j"])(H,{size:"12"},{default:Object(o["H"])(()=>[Object(o["j"])(y,{class:"input select"},{default:Object(o["H"])(()=>[Object(o["j"])(k,null,{default:Object(o["H"])(()=>[l]),_:1}),Object(o["j"])(T,{displayFormat:"YYYY-MM-DD",placeholder:"請選擇",readonly:r.checked,modelValue:r.birthday,"onUpdate:modelValue":e[3]||(e[3]=t=>r.birthday=t)},null,8,["readonly","modelValue"])]),_:1})]),_:1}),Object(o["j"])(H,{size:"12",style:{display:"flex","justify-content":"center"}},{default:Object(o["H"])(()=>[Object(o["j"])(_,{style:{width:"auto",height:"128px","max-width":"100%"},src:r.petImageUrl,alt:"寵物照片"},null,8,["src"])]),_:1}),Object(o["j"])(H,{size:"12"},{default:Object(o["H"])(()=>[Object(o["j"])(y,{class:"input"},{default:Object(o["H"])(()=>[Object(o["j"])(k,null,{default:Object(o["H"])(()=>[a]),_:1}),Object(o["j"])(v,{type:"file",accept:"image/*",onChange:d.imgFileChange},null,8,["onChange"])]),_:1})]),_:1}),Object(o["j"])(H,{size:"12"},{default:Object(o["H"])(()=>[Object(o["j"])(y,{class:"input"},{default:Object(o["H"])(()=>[Object(o["j"])(k,null,{default:Object(o["H"])(()=>[s]),_:1}),Object(o["j"])(v,{readonly:r.checked,modelValue:r.address,"onUpdate:modelValue":e[4]||(e[4]=t=>r.address=t),modelModifiers:{trim:!0}},null,8,["readonly","modelValue"])]),_:1})]),_:1}),Object(o["j"])(H,{size:"12"},{default:Object(o["H"])(()=>[Object(o["j"])(y,{class:"input"},{default:Object(o["H"])(()=>[Object(o["j"])(k,null,{default:Object(o["H"])(()=>[j]),_:1}),Object(o["j"])(v,{readonly:"",modelValue:r.amount,"onUpdate:modelValue":e[5]||(e[5]=t=>r.amount=t)},null,8,["modelValue"])]),_:1})]),_:1}),Object(o["j"])(H,{size:"12"},{default:Object(o["H"])(()=>[Object(o["j"])(V,{onClick:d.save,class:"button-3"},{default:Object(o["H"])(()=>[b]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["j"])(S,null,{default:Object(o["H"])(()=>[Object(o["j"])(z,{step:"3"})]),_:1})]),_:1})}var r=n("d722"),d=n("d867");const O=Object(o["i"])("關閉"),m=Object(o["i"])("光明燈介紹");function h(t,e,n,c,i,l){const a=Object(o["B"])("ion-button"),s=Object(o["B"])("ion-buttons"),j=Object(o["B"])("ion-title"),b=Object(o["B"])("ion-toolbar"),u=Object(o["B"])("ion-header"),r=Object(o["B"])("remote-img"),d=Object(o["B"])("ion-col"),h=Object(o["B"])("ion-row"),p=Object(o["B"])("ion-grid"),f=Object(o["B"])("ion-content");return Object(o["u"])(),Object(o["g"])(o["a"],null,[Object(o["j"])(u,null,{default:Object(o["H"])(()=>[Object(o["j"])(b,null,{default:Object(o["H"])(()=>[Object(o["j"])(s,{slot:"end"},{default:Object(o["H"])(()=>[Object(o["j"])(a,{onClick:l.close},{default:Object(o["H"])(()=>[O]),_:1},8,["onClick"])]),_:1}),Object(o["j"])(j,null,{default:Object(o["H"])(()=>[m]),_:1})]),_:1})]),_:1}),Object(o["j"])(f,{class:"order-item"},{default:Object(o["H"])(()=>[Object(o["j"])(p,null,{default:Object(o["H"])(()=>[Object(o["j"])(h,null,{default:Object(o["H"])(()=>[Object(o["j"])(d,{offset:"4",size:"4"},{default:Object(o["H"])(()=>[Object(o["j"])(r,{path:n.icon},null,8,["path"])]),_:1})]),_:1}),Object(o["j"])(h,null,{default:Object(o["H"])(()=>[Object(o["j"])(d,{class:"ion-text-center",offset:"4",size:"4"},{default:Object(o["H"])(()=>[Object(o["i"])(Object(o["D"])(n.title),1)]),_:1})]),_:1}),Object(o["j"])(h,{class:"ion-margin-top"},{default:Object(o["H"])(()=>[Object(o["j"])(d,{size:"12",innerHTML:n.introduction},null,8,["innerHTML"])]),_:1})]),_:1})]),_:1})],64)}var p=n("448a"),f={components:{IonButton:d["IonButton"],IonButtons:d["IonButtons"],IonCol:d["IonCol"],IonContent:d["IonContent"],IonGrid:d["IonGrid"],IonHeader:d["IonHeader"],IonRow:d["IonRow"],IonTitle:d["IonTitle"],IonToolbar:d["IonToolbar"],RemoteImg:p["a"]},methods:{close(){d["modalController"].dismiss()}},props:{icon:String,introduction:String,title:String}},I=(n("0eeb"),n("6b0d")),g=n.n(I);const _=g()(f,[["render",h],["__scopeId","data-v-441a2101"]]);var H=_,B=n("e193"),k={components:{IonBackButton:d["IonBackButton"],IonButton:d["IonButton"],IonButtons:d["IonButtons"],IonCheckbox:d["IonCheckbox"],IonCol:d["IonCol"],IonContent:d["IonContent"],IonDatetime:d["IonDatetime"],IonFooter:d["IonFooter"],IonGrid:d["IonGrid"],IonHeader:d["IonHeader"],IonImg:d["IonImg"],IonInput:d["IonInput"],IonItem:d["IonItem"],IonLabel:d["IonLabel"],IonPage:d["IonPage"],IonRow:d["IonRow"],IonSelect:d["IonSelect"],IonSelectOption:d["IonSelectOption"],IonText:d["IonText"],IonTitle:d["IonTitle"],IonToolbar:d["IonToolbar"],MenuBar:B["a"],RemoteImg:p["a"]},data(){return{id:this.$route.params.id,checked:!1,family:"",name:"",birthday:"",phone:"",address:"",amount:0,timestamp:this.$route.params.timestamp,lights:[],list:[],member:{},pet_image:"",petImageUrl:""}},methods:{async intro(t){const e=await d["modalController"].create({component:H,componentProps:{icon:t.icon,introduction:t.introduction,title:t.title}});await e.present()},pick(t){this.lights.forEach(t=>{t.picked=!1}),t.picked=!0,this.amount=t.price},query(){Object(r["queryLightList"])(this.id,t=>{if(this.lights=t.lights,this.list=t.list,this.member=t.member,this.timestamp){let t=this.$store.state.items.find(t=>t.timestamp==this.timestamp);if(t){let e=this.lights.find(e=>e.id===t.light.id);e&&(e.picked=!0,this.amount=e.price),this.checked=t.checked,this.name=t.name,this.birthday=t.birthday,this.phone=t.phone,this.address=t.address,this.pet_image=t.pet_image}}})},save(){let t=this.lights.filter(t=>t.picked);if(!t.length)return void alert("請選擇燈種");let e={checked:!1,light:t[0],temple_id:this.id,timestamp:this.timestamp||Date.now()};""!==this.name?""!==this.birthday?(""===this.phone&&(this.phone=this.member.username),""!==this.address?""!==this.pet_image?(e.name=this.name,e.birthday=this.birthday.split("T")[0],e.phone=this.phone,e.address=this.address,e.pet_image=this.pet_image,this.$store.commit("add",e),this.$router.go(-1)):alert("請上傳寵物照片"):alert("請輸入地址")):alert("請輸入生日"):alert("請輸入姓名")},imgFileChange(t){const e=t.target.files[0],n=new FileReader;n.readAsDataURL(e),n.onload=()=>{this.pet_image=n.result}}},mounted(){this.query()},watch:{checked(t){t&&(this.family="",this.name=this.member.name,this.birthday=this.member.birthday,this.phone=this.member.username,this.address=this.member.address)},family(t){t&&this.list.forEach(e=>{t==e.id&&(this.name=e.name,this.birthday=e.birthday,this.pet_image=e.image)})},$route(t){"NewOrderItem"===t.name&&(this.id=t.params.id,this.timestamp=t.params.timestamp,this.query())},pet_image(){this.petImageUrl=Object(r["getImgSrc"])(this.pet_image)}}};n("e845");const y=g()(k,[["render",u],["__scopeId","data-v-11282767"]]);e["default"]=y},9660:function(t,e,n){},e193:function(t,e,n){"use strict";var o=n("7a23");const c=Object(o["i"])(" 點燈祈福 "),i=Object(o["i"])(" 會員資料資料 "),l=Object(o["i"])(" 購買資料 "),a=Object(o["i"])(" 登出系統 ");function s(t,e,n,s,j,b){const u=Object(o["B"])("ion-img"),r=Object(o["B"])("ion-button"),d=Object(o["B"])("ion-buttons"),O=Object(o["B"])("ion-toolbar");return Object(o["u"])(),Object(o["g"])(o["a"],null,[n.step?(Object(o["u"])(),Object(o["e"])(u,{key:0,class:"step-bar",src:`/assets/images/step-${n.step}.png`},null,8,["src"])):Object(o["f"])("",!0),Object(o["I"])(Object(o["j"])(O,null,{default:Object(o["H"])(()=>[Object(o["j"])(d,null,{default:Object(o["H"])(()=>[Object(o["j"])(r,{class:"button-4","router-link":"/temple-list"},{default:Object(o["H"])(()=>[Object(o["j"])(u,{slot:"start",src:"/assets/images/icon1-1.png"}),c]),_:1}),Object(o["j"])(r,{class:"button-4","router-link":"/member-info"},{default:Object(o["H"])(()=>[Object(o["j"])(u,{slot:"start",src:"/assets/images/icon1-2.png"}),i]),_:1}),Object(o["j"])(r,{class:"button-4","router-link":"/order-list"},{default:Object(o["H"])(()=>[Object(o["j"])(u,{slot:"start",src:"/assets/images/icon1-3.png"}),l]),_:1}),Object(o["j"])(r,{class:"button-4",onClick:b.logout},{default:Object(o["H"])(()=>[Object(o["j"])(u,{slot:"start",src:"/assets/images/icon1-4.png"}),a]),_:1},8,["onClick"])]),_:1})]),_:1},512),[[o["F"],b.token]])],64)}var j=n("d722"),b=n("d867"),u={components:{IonButton:b["IonButton"],IonButtons:b["IonButtons"],IonImg:b["IonImg"],IonToolbar:b["IonToolbar"]},computed:{token(){return this.$store.state.token}},methods:{logout(){Object(j["logout"])(()=>{this.$store.commit("logout"),this.$route.meta.requiresAuth&&this.$router.push({name:"Home"})})}},props:{step:String}},r=(n("00f5"),n("6b0d")),d=n.n(r);const O=d()(u,[["render",s],["__scopeId","data-v-f60f87d0"]]);e["a"]=O},e845:function(t,e,n){"use strict";n("9660")}}]);
//# sourceMappingURL=chunk-264ec364.ff4d1153.js.map