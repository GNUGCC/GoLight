(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13dfdf8e"],{"109e":function(e,t,c){"use strict";c("9584")},9584:function(e,t,c){},bb41:function(e,t,c){"use strict";c.r(t);var o=c("7a23");const n=Object(o["i"])("點燈祈福"),j=Object(o["i"])(" 已選燈列表 "),i=Object(o["i"])("修改"),b=Object(o["i"])("刪除"),l=Object(o["i"])(" 已選燈列表 "),a=Object(o["i"])("+   新增"),s=Object(o["i"])("33使用BLESS序號"),O=Object(o["i"])("　　總金額　　"),r=Object(o["i"])("　　付款方式　　"),u=Object(o["i"])("信用卡"),d=Object(o["i"])("銀行轉帳"),f=Object(o["i"])("超商代收"),m=Object(o["i"])("付款");function p(e,t,c,p,h,_){const I=Object(o["B"])("ion-back-button"),H=Object(o["B"])("ion-buttons"),B=Object(o["B"])("ion-title"),g=Object(o["B"])("ion-toolbar"),k=Object(o["B"])("ion-header"),w=Object(o["B"])("ion-col"),z=Object(o["B"])("ion-row"),$=Object(o["B"])("ion-text"),v=Object(o["B"])("ion-grid"),S=Object(o["B"])("ion-button"),y=Object(o["B"])("ion-img"),C=Object(o["B"])("ion-label"),x=Object(o["B"])("ion-input"),E=Object(o["B"])("ion-item"),L=Object(o["B"])("ion-select-option"),T=Object(o["B"])("ion-select"),J=Object(o["B"])("ion-content"),D=Object(o["B"])("menu-bar"),F=Object(o["B"])("ion-footer"),V=Object(o["B"])("ion-page");return Object(o["u"])(),Object(o["e"])(V,null,{default:Object(o["H"])(()=>[Object(o["j"])(k,null,{default:Object(o["H"])(()=>[Object(o["j"])(g,null,{default:Object(o["H"])(()=>[Object(o["j"])(H,{slot:"start"},{default:Object(o["H"])(()=>[Object(o["j"])(I,{"default-href":"/temple/"+h.id},null,8,["default-href"])]),_:1}),Object(o["j"])(B,null,{default:Object(o["H"])(()=>[n]),_:1})]),_:1})]),_:1}),Object(o["j"])(J,{class:"new-order"},{default:Object(o["H"])(()=>[e.$store.state.items.length?(Object(o["u"])(),Object(o["e"])(v,{key:0},{default:Object(o["H"])(()=>[Object(o["j"])(z,null,{default:Object(o["H"])(()=>[Object(o["j"])(w,{size:"12",style:{"font-size":"1.3rem"}},{default:Object(o["H"])(()=>[j]),_:1})]),_:1}),(Object(o["u"])(!0),Object(o["g"])(o["a"],null,Object(o["A"])(e.$store.state.items,e=>(Object(o["u"])(),Object(o["e"])(z,{class:"record ion-margin-top",key:e.timestamp},{default:Object(o["H"])(()=>[Object(o["j"])(w,{size:"4"},{default:Object(o["H"])(()=>[Object(o["i"])(Object(o["D"])(e.light.title),1)]),_:2},1024),Object(o["j"])(w,{size:"4"},{default:Object(o["H"])(()=>[Object(o["i"])(Object(o["D"])(e.name),1)]),_:2},1024),Object(o["j"])(w,{class:"ion-text-right",size:"2"},{default:Object(o["H"])(()=>[Object(o["j"])($,{"router-link":"/new-order-item/"+h.id+"/"+e.timestamp},{default:Object(o["H"])(()=>[i]),_:2},1032,["router-link"])]),_:2},1024),Object(o["j"])(w,{class:"ion-text-right",size:"2"},{default:Object(o["H"])(()=>[Object(o["j"])($,{onClick:t=>_.remove(e)},{default:Object(o["H"])(()=>[b]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(Object(o["u"])(),Object(o["e"])(v,{key:1},{default:Object(o["H"])(()=>[Object(o["j"])(z,null,{default:Object(o["H"])(()=>[Object(o["j"])(w,{size:"12",style:{"font-size":"1.3rem"}},{default:Object(o["H"])(()=>[l]),_:1})]),_:1}),Object(o["j"])(z,{class:"record ion-margin-top"},{default:Object(o["H"])(()=>[Object(o["j"])(w)]),_:1})]),_:1})),Object(o["j"])(v,null,{default:Object(o["H"])(()=>[Object(o["j"])(z,{class:"ion-margin-bottom ion-padding-bottom"},{default:Object(o["H"])(()=>[Object(o["j"])(w,{size:"12"},{default:Object(o["H"])(()=>[Object(o["j"])(S,{class:"button-3","router-link":"/new-order-item/"+h.id},{default:Object(o["H"])(()=>[a]),_:1},8,["router-link"])]),_:1})]),_:1}),Object(o["j"])(z,{class:"ion-margin-top ion-padding-top"},{default:Object(o["H"])(()=>[Object(o["j"])(w,{size:"6"},{default:Object(o["H"])(()=>[Object(o["j"])(S,{class:"button-1","router-link":"/coupon-list/"+h.id},{default:Object(o["H"])(()=>[s]),_:1},8,["router-link"])]),_:1}),Object(o["j"])(w,{size:"2"},{default:Object(o["H"])(()=>[Object(o["j"])(y,{onClick:_.help,src:"/assets/images/icon3.png",style:{width:"45px"}},null,8,["onClick"])]),_:1}),Object(o["j"])(w,{size:"4"},{default:Object(o["H"])(()=>[Object(o["I"])(Object(o["j"])($,{style:{"font-size":"0.8rem"}},{default:Object(o["H"])(()=>[Object(o["i"])("總折抵"+Object(o["D"])(_.discount)+"元",1)]),_:1},512),[[o["F"],_.discount]])]),_:1}),Object(o["j"])(w,{size:"12"},{default:Object(o["H"])(()=>[Object(o["j"])(E,{class:"input"},{default:Object(o["H"])(()=>[Object(o["j"])(C,null,{default:Object(o["H"])(()=>[O]),_:1}),Object(o["j"])(x,{readonly:"",value:_.amount},null,8,["value"])]),_:1})]),_:1}),Object(o["j"])(w,{size:"12"},{default:Object(o["H"])(()=>[Object(o["j"])(E,{class:"input select"},{default:Object(o["H"])(()=>[Object(o["j"])(C,null,{default:Object(o["H"])(()=>[r]),_:1}),Object(o["j"])(T,{interface:"popover",placeholder:"請選擇",modelValue:h.method,"onUpdate:modelValue":t[0]||(t[0]=e=>h.method=e)},{default:Object(o["H"])(()=>[Object(o["j"])(L,{value:"1"},{default:Object(o["H"])(()=>[u]),_:1}),Object(o["j"])(L,{value:"2"},{default:Object(o["H"])(()=>[d]),_:1}),Object(o["j"])(L,{value:"3"},{default:Object(o["H"])(()=>[f]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),Object(o["j"])(w,{size:"12"},{default:Object(o["H"])(()=>[Object(o["j"])(S,{onClick:_.submit,class:"button-3"},{default:Object(o["H"])(()=>[m]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["j"])(F,null,{default:Object(o["H"])(()=>[Object(o["j"])(D,{step:e.$store.state.items.length?"4":"2"},null,8,["step"])]),_:1})]),_:1})}var h=c("d722"),_=c("d867"),I=c("c3c4"),H=c("e193"),B={components:{IonBackButton:_["IonBackButton"],IonButton:_["IonButton"],IonButtons:_["IonButtons"],IonCol:_["IonCol"],IonContent:_["IonContent"],IonFooter:_["IonFooter"],IonGrid:_["IonGrid"],IonHeader:_["IonHeader"],IonImg:_["IonImg"],IonInput:_["IonInput"],IonItem:_["IonItem"],IonLabel:_["IonLabel"],IonPage:_["IonPage"],IonRow:_["IonRow"],IonSelect:_["IonSelect"],IonSelectOption:_["IonSelectOption"],IonText:_["IonText"],IonTitle:_["IonTitle"],IonToolbar:_["IonToolbar"],MenuBar:H["a"]},computed:{amount(){let e=0-this.discount;return this.$store.state.items.forEach(t=>{e+=t.light.price}),e>0?e:0},discount(){let e=0;return this.$store.state.coupons.forEach(t=>{t.checked&&(e+=parseInt(t.discount))}),e}},data(){return{id:this.$route.params.id,method:""}},methods:{async help(){const e=await _["alertController"].create({header:"BLESS序號說明",message:"1) 點選BLESS序號按鈕，可進入BLESS序號輸入頁面，輸入序號則可折抵金額。<br>2) 多張序號可一併使用，要使用的序號，請在欄位前方點選選取，按下使用則開始使用。<br>3) 一個序號只能使用一次。<br>4) 序號無法兌換現金或找零，一個序號請一次使用完畢。",buttons:["OK"]});await e.present()},remove(e){confirm(`確定要刪除${e.name}的${e.light.title}嗎？`)&&this.$store.commit("remove",e)},submit(){if(this.$store.state.items.length)if(""!==this.method){if(confirm("確定要送出訂單嗎？")){let e=[];this.$store.state.coupons.forEach(t=>{t.checked&&e.push(t.code)}),Object(h["createOrder"])({items:JSON.parse(JSON.stringify(this.$store.state.items)),coupons:e,method:this.method},e=>{let t;this.$store.commit("purge");let c=I["a"].create(e.url,"_blank",{hardwareback:"no",hidenavigationbuttons:"yes",location:"no",usewkwebview:"yes"});c.on("exit").subscribe(()=>{t||this.$router.push({name:"Order",params:{id:e.order_id}})}),c.on("loadstop").subscribe(o=>{o.url.startsWith(e.return_url)&&(t=!0,c.close(),Object(h["queryOrder"])(e.order_id,t=>{2==t.order.status?this.$router.push({name:"OrderCompleted",params:{id:e.order_id}}):this.$router.push({name:"Order",params:{id:e.order_id}})}))})})}}else alert("請選擇付款方式");else alert("請新增燈種")}}},g=(c("109e"),c("6b0d")),k=c.n(g);const w=k()(B,[["render",p],["__scopeId","data-v-41fb799a"]]);t["default"]=w}}]);
//# sourceMappingURL=chunk-13dfdf8e.fafa7c84.js.map